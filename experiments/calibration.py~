def linear_scale_to_range(low_cutoff, high_cutoff, num_pixels, sensor_value):
    """
    This function scales a sensor value between the low_cutoff
    and high_cutoff in order to light the appropriate number of
    pixels.   Must display 1 pixel at the low cutoff value and
    num_pixels at the high_cutoff.   Linear scale between them.
    """
    values_in_range = high_cutoff - low_cutoff + 1
    ticks_per_pixel = values_in_range / (num_pixels - 1)  # 1 to (num_pixels-1)

    #
    # Shift sensor value down to cutoff (base noise level calibration)
    #
    if sensor_value >= low_cutoff:
        sensor_ticks = sensor_value - low_cutoff
    else:
        sensor_ticks = 0

    pixels = sensor_ticks / ticks_per_pixel
    if pixels > (num_pixels - 1):
        pixels = num_pixels - 1
        
    return pixels

def test_calibration():
    """
    """
    for i in range(90, 510):
        print i, "=>", linear_scale_to_range(100, 500, 20, i)
